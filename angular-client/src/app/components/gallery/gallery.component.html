<nav class="navbar sticky-top navbar-dark" style="background-color: #00549f;">
  <div class="container-fluid">
    <div class="input-group">
      <input id="tagFilterFieldControl" type="text" class="form-control" placeholder="Tags" [(ngModel)]="filter">
      <button (click)="applyFilter()" (keyup.Enter)='applyFilter()' class="btn btn-secondary" type="button" id="button-addon2">Filter</button>
    </div>
  </div>
</nav>
<div class="container-fluid">
  <ngx-masonry [options]="masonryOptions" style="margin: 0;" [ordered]="true">
    <div ngxMasonryItem class="masonry-item" style="width: 20%; padding:0" *ngFor="let image of images">
      <div class="d-flex justify-content-center" data-bs-toggle="modal" data-bs-target="#GalleryModal" (click)='setModalImage(image)'>
        <img src="{{backendpath}}/img/{{image._id}}_small" class="img-fluid img-thumbnail" style="width: 100%; min-height:100px; max-height: 1000px; object-fit: cover;">
      </div>
    </div>
  </ngx-masonry>
<div class="modal fade" id="GalleryModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" (keyup.Enter)='updateTags()'>
      <div class="modal-header">
        <h5 class="modal-title">{{modalImage._id}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img src="{{backendpath}}/img/{{modalImage._id}}" style="width:100%; max-height=80%">
        <div class="container-fluid" style="padding-top: 10px">
          <div class="container-fluid" *ngFor="let tag of modalImage.tags">
            <div class="input-group" style="padding-top: 10px">
              <input type="text" class="form-control" value="{{tag}}" disabled readonly>
              <button class="btn btn-danger" type="button" (click)='removeTag(tag)' *ngIf='true'>Remove</button>
            </div>
          </div>
          <div class="container-fluid" *ngIf='true'>
            <div class="input-group" style="padding-top: 10px">
              <input type="text" class="form-control" [(ngModel)]="newTag" (keyup.Space)='addTag()'>
              <button class="btn btn-success" type="button" (click)='addTag()'>Add</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" type="button" *ngIf='true' [disabled]="!imageChanged" (click)="updateTags()">Save</button>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid" style="padding:10px">
  <div class="d-flex justify-content-center">
    <button class="btn btn-primary" type="button" (click)="loadMoreImages()">More</button>
  </div>
</div>
